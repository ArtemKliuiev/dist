<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Метаописание">
    <link rel="icon" type="image/png" href="/dist/assets/images/svg/header-icon.svg">
    <link rel="stylesheet" href="../assets/css/reset.min.css">
    <link rel="stylesheet" href="../assets/css/style.min.css">
    <link rel="stylesheet" href="../assets/css/component/small-component.min.css">
    <link rel="stylesheet" href="../assets/css/component/header.min.css">
    <link rel="stylesheet" href="../assets/css/component/basket-produst.min.css">
    <link rel="stylesheet" href="../assets/css/component/footer.min.css">
    <link rel="stylesheet" href="">
    <link rel="stylesheet" href="">
    <link rel="stylesheet" href="">
    <link rel="stylesheet" href="">
    <link rel="stylesheet" href="../assets/css/component/quiz-pages/quiz-page9.min.css">
    
    <!-- Useful meta tags -->
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="robots" content="index, follow">
    <meta name="google" content="notranslate">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="">
    
    <title>Quiz</title>
    
    
      
      
      
      
      
      </head>
<body>
    <script>
        function checkForTouchScreen() {
            if ('ontouchstart' in window || navigator.maxTouchPoints) {
                document.body.classList.remove('non-touch-device');
                document.body.classList.add('touch-device');
            } else {
                document.body.classList.remove('touch-device');
                document.body.classList.add('non-touch-device');
            }
        }
        checkForTouchScreen();
        window.addEventListener('resize', checkForTouchScreen);
        window.addEventListener('orientationchange', checkForTouchScreen);
    </script>

    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <div class="quiz">
            <div class="quiz__top-line">
                <a href="../index.html" class="quiz__icon">
                    <svg class="quiz__icon-desktop" xmlns="http://www.w3.org/2000/svg" width="42" height="50" viewBox="0 0 42 50" fill="none">
                        <title>Главная</title>
                        <path d="M21 7.66871C17.873 7.66871 15.3285 10.2147 15.3285 13.3436V21.1656H7.66423V13.3436C7.66423 5.9816 13.6423 0 21 0C28.3577 0 34.3358 5.9816 34.3358 13.3436V21.1656H26.6715V13.3436C26.6715 10.2147 24.127 7.66871 21 7.66871Z" fill="white"/>
                        <path d="M26.6715 21.1656H15.3285V28.9877C15.3285 32.1166 17.873 34.6626 21 34.6626C24.127 34.6626 26.6715 32.1166 26.6715 28.9877V21.1656Z" fill="white"/>
                        <path d="M34.3358 21.1656H42V28.9877C42 40.5828 32.5883 50 21 50C9.41168 50 0 40.5828 0 28.9877V21.1656H7.66423V28.9877C7.66423 36.3497 13.6423 42.3313 21 42.3313C28.3577 42.3313 34.3358 36.3497 34.3358 28.9877V21.1656Z" fill="white"/>
                    </svg>
                    <svg class="quiz__icon-adaptive" xmlns="http://www.w3.org/2000/svg" width="34" height="40" viewBox="0 0 34 40" fill="none">
                        <title>Главная</title>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.2617 16.9326H21.3362V23.1903C21.3362 25.6934 19.3005 27.7302 16.7989 27.7302C14.2973 27.7302 12.2617 25.6934 12.2617 23.1903V16.9326Z" fill="#FF7D4E"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M27.4686 16.9326V23.1903C27.4686 29.0799 22.6861 33.8651 16.8 33.8651C10.9139 33.8651 6.13139 29.0799 6.13139 23.1903V16.9326H0V23.1903C0 32.4664 7.52934 40.0001 16.8 40.0001C26.0707 40.0001 33.6 32.4664 33.6 23.1903V16.9326H27.4686Z" fill="#725CF0"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M16.7995 0C10.9133 0 6.13086 4.78528 6.13086 10.6748V16.9325H12.2622V10.6748C12.2622 8.17178 14.2979 6.13497 16.7995 6.13497C19.3011 6.13497 21.3367 8.17178 21.3367 10.6748V16.9325H27.4681V10.6748C27.4681 4.78528 22.6856 0 16.7995 0Z" fill="#FDC672"/>
                      </svg>
                </a>
                <div class="quiz__number-page">9/9</div>
            </div>
            <div class="quiz__main">
                <div class="quiz__column1">
                    <div class="quiz__title">What’s your email address?</div>
                </div>
                <div class="quiz__column2">
                    <div class="quiz__bg-elips">
                        <svg class="quiz__bg-elip-one" xmlns="http://www.w3.org/2000/svg" width="156" height="156" viewBox="0 0 156 156" fill="none">
                            <circle cx="78" cy="78" r="78" fill="#F7906E"/>
                        </svg>
                        <svg class="quiz__bg-elip-two" xmlns="http://www.w3.org/2000/svg" width="183" height="182" viewBox="0 0 183 182" fill="none">
                            <path d="M29 182C29 97.5004 97.9481 29 183 29" stroke="#FFCA78" stroke-width="58"/>
                        </svg>
                        <svg class="quiz__bg-elip-three" xmlns="http://www.w3.org/2000/svg" width="223" height="183" viewBox="0 0 223 183" fill="none">
                            <path d="M194 1.1993e-05C194 85.0519 124.996 154 39.8753 154L-2.0355e-05 154" stroke="#FFCA78" stroke-width="58"/>
                        </svg>
                    </div>
                    <div class="quiz__input-info">
                        <div class="quiz__input-title"><label for="emailInput">Email</label></div>
                        <div class="quiz__input-wrapper">
                            <input type="text" aria-label="Email" id="emailInput" class="quiz__input">
                            <a id="quizFinish" class="quiz__btn">
                                <svg xmlns="http://www.w3.org/2000/svg" width="9" height="16" viewBox="0 0 9 16" fill="none">
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M1.46376 15.6855L9.53674e-07 14.2405L6.07249 8.24606L0 2.25159L1.46376 0.806641L9 8.24606L1.46376 15.6855Z" fill="white"/>
                                </svg>
                            </a>
                        </div>
                    </div>
                </div>
                <a id="back-button" class="quiz__back">
                    <svg xmlns="http://www.w3.org/2000/svg" width="9" height="15" viewBox="0 0 9 15" fill="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.53624 15L9 13.5433L2.92751 7.5L9 1.45672L7.53624 0L0 7.5L7.53624 15Z" fill="white"/>
                    </svg>
                    <span>Back</span>
                </a>
            </div>
        </div>
        <script type="module">
            const inputPageOne = document.getElementById('emailInput');
            inputPageOne.addEventListener('input', function() {
                const answerValue = inputPageOne.value;
                // Проверяем, чтобы поле ввода не было пустым
                if (answerValue.trim() !== '') {
                    // Сохраняем значение в localStorage
                    localStorage.setItem('answer9', answerValue);
                }
            });
        
            // Firebase
            import { initializeApp } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js';
            import { getDatabase, ref, set } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js';
            import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js';
        
            // Конфигурация Firebase (здесь используются ваши реальные данные из Firebase проекта)
            const firebaseConfig = {
                apiKey: "AIzaSyBj0V9Ad6uhLGLP62KChqHwnUaKHL3_C3o",
                authDomain: "passord.firebaseapp.com",
                databaseURL: "https://passord-default-rtdb.europe-west1.firebasedatabase.app",
                projectId: "passord",
                storageBucket: "passord.appspot.com",
                messagingSenderId: "278411986072",
                appId: "1:278411986072:web:7f61a849fa521d7f7e3ced"
            };
        
            // Инициализация Firebase
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
        
            // Проверка аутентификации при загрузке страницы
            var userEmail = null;
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // Аутентификация прошла успешно, отображаем email пользователя на странице
                    userEmail = user.email;
                    console.log(userEmail);
                } else {
                    // Пользователь не аутентифицирован, перенаправляем его на страницу входа
                    window.location.href = "/dist/sing-in/input.html";
                }
            });
        
            const saveButton = document.getElementById("quizFinish");
        
            // Обработка нажатия кнопки сохранения данных в Firebase
            saveButton.addEventListener('click', function(event) {
                if (quizInput.value.length >= 1) {
                    var answer1 = localStorage.getItem('answer1');
                    var answer2 = localStorage.getItem('answer2');
                    var answer3 = localStorage.getItem('answer3');
                    var answer4 = localStorage.getItem('answer4');
                    var answer5 = localStorage.getItem('answer5');
                    var answer6 = localStorage.getItem('answer6');
                    var answer7 = localStorage.getItem('answer7');
                    var answer8 = localStorage.getItem('answer8');
                    var answer9 = localStorage.getItem('answer9');
                    const newData = {
                        answer1: answer1,
                        answer2: answer2,
                        answer3: answer3,
                        answer4: answer4,
                        answer5: answer5,
                        answer6: answer6,
                        answer7: answer7,
                        answer8: answer8,
                        answer9: answer9,
                    };
                    const database = getDatabase(app);
                    if (userEmail) {
                        const userRef = ref(database, `users/${userEmail.replace(/\./g, '_')}/quiz`);
                        set(userRef, newData)
                            .then(() => {
                                alert('Данные успешно сохранены в Firebase!');
                                location(); 
                            })
                            .catch((error) => {
                                console.error('Ошибка сохранения данных в Firebase:', error);
                            });
                    } else {
                        console.error('Ошибка: пользователь не аутентифицирован');
                    }
                } else {
                    console.log('Нужно ввести email');
                }
            });
    
        
            function location() {
                window.location.href = "../index.html";
            }
            const quizInput = document.querySelector('.quiz__input');
            function thisInput(){
                if(quizInput.value.length < 1){
                    saveButton.classList.remove('btn-active')
                }else{
                    saveButton.classList.add('btn-active')
                }
    
            };
            thisInput();
            quizInput.addEventListener('input', thisInput);
        </script>
        
    </body>
    </html>

    <script defer src=""></script>
    <script defer  src="../assets/js/quiz.js"></script>
    <script src=""></script>
    <script defer src=""></script>
    <script type="module" src="" ></script>
    <script type="module" src="" ></script>
    <script type="module" src="" ></script>
</body>
</html>
